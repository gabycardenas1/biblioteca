<odoo>
  <data>

    <!-- ===================== LIBROS ===================== -->
    <record model="ir.ui.view" id="biblioteca_libro_list">
        <field name="name">biblioteca libro list</field>
        <field name="model">biblioteca.libro</field>
        <field name="arch" type="xml">
            <list>
                <field name="name" string="Título"/>
                <field name="autor" string="Autor"/>
                <field name="categoria" string="Categoría"/>
                <field name="editorial" string="Editorial"/>
                <field name="paginas" string="Páginas"/>
                <field name="fecha_publicacion" string="Fecha Publicación"/>
                <field name="ejemplares" string="Ejemplares"/>
                <field name="costo" string="Costo"/>
                <field name="ubicacion" string="Ubicación"/>
                <field name="prestamo_id" string="Préstamo"/>
                <field name="multa_id" string="Multa"/>
                <field name="state" invisible="1"/>
            </list>
        </field>
    </record>

    <record model="ir.ui.view" id="biblioteca_libro_form">
        <field name="name">biblioteca libro form</field>
        <field name="model">biblioteca.libro</field>
        <field name="arch" type="xml">
            <form>
                <header>
                    <field name="state" widget="statusbar" statusbar_visible="draft,saved,editing"/>

                    <button name="action_fill_book_data" 
                            type="object" 
                            string="Buscar Libro" 
                            class="oe_highlight"
                            invisible="state != 'draft'"/>

                    <button name="action_save_record" 
                            type="object" 
                            string="Guardar" 
                            class="oe_highlight"
                            invisible="state not in ('draft', 'editing')"/>

                    <button name="action_discard" 
                            type="object" 
                            string="Descartar" 
                            invisible="state not in ('draft', 'editing')"/>
                    
                    <button name="action_edit" 
                            type="object" 
                            string="Editar" 
                            class="oe_highlight"
                            invisible="state != 'saved'"/>

                    <button name="action_delete_record" 
                            type="object" 
                            string="Eliminar" 
                            confirm="¿Confirma la eliminación del registro?"
                            class="btn-danger"
                            invisible="state != 'saved'"/>
                </header>
                
                <sheet readonly="state in ('saved', 'deleted')">
                    <group>
                        <field name="name" string="Título del libro" placeholder="Ingrese el título del libro"/>
                        <field name="isbn" string="ISBN" placeholder="Ingrese el código ISBN"/>
                        <field name="autor" string="Autor" placeholder="Seleccione o ingrese el autor"/>
                        <field name="categoria" string="Categoría" placeholder="Ingrese la categoría"/>

                        <field name="editorial" string="Editorial"/>
                        <field name="fecha_publicacion" string="Fecha de Publicación"/>
                        <field name="paginas" string="Páginas"/>
                        <field name="ejemplares" string="Número de ejemplares" placeholder="Cantidad disponible"/>
                        <field name="costo" string="Costo" placeholder="Costo del libro" readonly="1"/>
                        <field name="ubicacion" string="Ubicación" placeholder="Ubicación física en la biblioteca"/>
                    </group>
                    
                    <notebook>
                        <page string="Resumen">
                            <field name="description" string="Resumen" placeholder="Breve descripción del libro"/>
                        </page>
                        <page string="Datos Técnicos">
                            <field name="openlibrary_key" string="Open Library Key" readonly="1"/>
                        </page>
                    </notebook>
                    
                    <group name="prestamo_multa" string="Gestión de Préstamos">
                        <field name="prestamo_id" string="Préstamo asociado" placeholder="Préstamo actual" readonly="1"/>
                        <field name="multa_id" string="Multa asociada" placeholder="Multa actual" readonly="1"/>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <record model="ir.ui.view" id="biblioteca_libro_search">
        <field name="name">biblioteca libro search</field>
        <field name="model">biblioteca.libro</field>
        <field name="arch" type="xml">
            <search>
                <field name="name" string="Título"/>
                <filter name="autor" string="Autor" context="{'group_by':'autor'}"/>
                <filter name="categoria" string="Categoría" context="{'group_by':'categoria'}"/>
            </search>
        </field>
    </record>

    <record model="ir.actions.act_window" id="biblioteca_libro_action_window">
        <field name="name">Libros</field>
        <field name="res_model">biblioteca.libro</field>
        <field name="view_mode">list,form</field>
    </record>


    <!-- ===================== AUTORES ===================== -->
    <record model="ir.ui.view" id="biblioteca_autor_list">
      <field name="name">biblioteca autor list</field>
      <field name="model">biblioteca.autor</field>
      <field name="arch" type="xml">
        <list>
          <field name="firstname" string="Nombre"/>
          <field name="lastname" string="Apellido"/>
        </list>
      </field>
    </record>

    <record model="ir.ui.view" id="biblioteca_autor_form">
      <field name="name">biblioteca autor form</field>
      <field name="model">biblioteca.autor</field>
      <field name="arch" type="xml">
        <form>
          <sheet>
            <group>
              <field name="firstname" string="Nombre" placeholder="Ingrese el nombre del autor"/>
              <field name="lastname" string="Apellido" placeholder="Ingrese el apellido del autor"/>
            </group>
          </sheet>
        </form>
      </field>
    </record>

    <record model="ir.actions.act_window" id="biblioteca_autor_action_window">
      <field name="name">Autores</field>
      <field name="res_model">biblioteca.autor</field>
      <field name="view_mode">list,form</field>
    </record>

    <!-- ===================== USUARIOS ===================== -->
    <record model="ir.ui.view" id="biblioteca_usuario_list">
      <field name="name">biblioteca usuario list</field>
      <field name="model">biblioteca.usuarios</field>
      <field name="arch" type="xml">
        <list>
          <field name="nombre_completo" string="Nombre completo"/>
          <field name="cedula" string="Cédula"/>
          <field name="correo" string="Correo"/>
          <field name="telefono" string="Teléfono"/>
          <field name="direccion" string="Dirección"/>
          <field name="fecha_registro" string="Fecha registro"/>
        </list>
      </field>
    </record>

    <record model="ir.ui.view" id="biblioteca_usuario_form">
      <field name="name">biblioteca usuario form</field>
      <field name="model">biblioteca.usuarios</field>
      <field name="arch" type="xml">
        <form>
          <sheet>
            <group>
              <field name="nombre_completo" string="Nombre completo" placeholder="Ingrese el nombre completo del usuario"/>
              <field name="cedula" string="Cédula" placeholder="Ingrese el número de cédula"/>
              <field name="correo" string="Correo" placeholder="Ingrese el correo electrónico"/>
              <field name="telefono" string="Teléfono" placeholder="Número de contacto"/>
              <field name="direccion" string="Dirección" placeholder="Ingrese la dirección"/>
              <field name="fecha_registro" string="Fecha registro" placeholder="Fecha de inscripción"/>
            </group>
          </sheet>
        </form>
      </field>
    </record>

    <record model="ir.actions.act_window" id="biblioteca_usuario_action_window">
      <field name="name">Usuarios</field>
      <field name="res_model">biblioteca.usuarios</field>
      <field name="view_mode">list,form</field>
    </record>

    <!-- ===================== PERSONAL ===================== -->
    <record model="ir.ui.view" id="biblioteca_personal_list">
      <field name="name">biblioteca personal list</field>
      <field name="model">biblioteca.personal</field>
      <field name="arch" type="xml">
        <list>
          <field name="name" string="Nombre"/>
          <field name="codigo" string="Código"/>
        </list>
      </field>
    </record>

    <record model="ir.ui.view" id="biblioteca_personal_form">
      <field name="name">biblioteca personal form</field>
      <field name="model">biblioteca.personal</field>
      <field name="arch" type="xml">
        <form>
          <sheet>
            <group>
              <field name="name" string="Nombre" placeholder="Nombre del personal"/>
              <field name="codigo" string="Código" placeholder="Código interno del personal"/>
            </group>
          </sheet>
        </form>
      </field>
    </record>

    <record model="ir.actions.act_window" id="biblioteca_personal_action_window">
      <field name="name">Personal</field>
      <field name="res_model">biblioteca.personal</field>
      <field name="view_mode">list,form</field>
    </record>

    <!-- ===================== PRÉSTAMOS ===================== -->
    <record model="ir.ui.view" id="biblioteca_prestamo_list">
      <field name="name">biblioteca prestamo list</field>
      <field name="model">biblioteca.prestamo</field>
      <field name="arch" type="xml">
        <list>
          <field name="name" string="Referencia"/>
          <field name="usuario_id" string="Usuario"/>
          <field name="libro_id" string="Libro"/>
          <field name="fecha_prestamo" string="Fecha préstamo"/>
          <field name="fecha_devolucion" string="Fecha devolución"/>
          <field name="multa_bol" string="¿Multa?"/>
          <field name="multa" string="Monto multa"/>
          <field name="personal_id" string="Personal"/>
          <field name="estado" string="Estado"/>
        </list>
      </field>
    </record>

    <record model="ir.ui.view" id="biblioteca_prestamo_form">
      <field name="name">biblioteca prestamo form</field>
      <field name="model">biblioteca.prestamo</field>
      <field name="arch" type="xml">
        <form string="Préstamo">
          <header>
              <!-- Botón para prestar -->
              <button name="action_prestar" type="object" string="Prestar"
                      class="btn-primary"
                      invisible="estado != 'borrador'"/>

              <!-- Botón para devolver -->
              <button name="action_devolver" type="object" string="Devolver"
                      class="btn-success"
                      invisible="estado != 'prestado'"/>

              <!-- Barra de estado -->
              <field name="estado" widget="statusbar"
                    statusbar_visible="borrador,prestado,devuelto,multa"
                    statusbar_colors='{"borrador":"gray","prestado":"blue","devuelto":"green","multa":"red"}'/>
          </header>


          <sheet>
            <group>
              <field name="name" string="Referencia" placeholder="Referencia del préstamo"/>
              <field name="usuario_id" string="Usuario" placeholder="Seleccione el usuario"/>
              <field name="libro_id" string="Libro" placeholder="Seleccione el libro"/>
              <field name="fecha_prestamo" string="Fecha préstamo" placeholder="Fecha del préstamo" readonly="1"/>
              <field name="fecha_devolucion" string="Fecha devolución" placeholder="Fecha de devolución" readonly="1"/>
              <field name="multa_bol" string="¿Multa?" placeholder="Indica si hay multa" readonly="1"/>
              <field name="multa" string="Monto multa" placeholder="Monto de la multa" readonly="1"/>
              <field name="personal_id" string="Personal" placeholder="Personal que realiza el préstamo"/>
            </group>
          </sheet>
        </form>
      </field>
    </record>


    <record model="ir.actions.act_window" id="biblioteca_prestamo_action_window">
      <field name="name">Préstamos</field>
      <field name="res_model">biblioteca.prestamo</field>
      <field name="view_mode">list,form</field>
    </record>

    <!-- ===================== MULTAS ===================== -->
    <record model="ir.ui.view" id="biblioteca_multa_list">
      <field name="name">biblioteca multa list</field>
      <field name="model">biblioteca.multa</field>
      <field name="arch" type="xml">
        <list>
          <field name="name_multa" string="Referencia"/>
          <field name="usuario_id" string="Usuario"/>
          <field name="libro_id" string="Libro"/>
          <field name="fecha_prestamo" string="Fecha préstamo"/>
          <field name="fecha_devolucion" string="Fecha devolución"/>
        </list>
      </field>
    </record>

    <record model="ir.ui.view" id="biblioteca_multa_form">
      <field name="name">biblioteca multa form</field>
      <field name="model">biblioteca.multa</field>
      <field name="arch" type="xml">
        <form>
          <sheet>
            <group>
              <field name="name_multa" string="Referencia" placeholder="Código de multa"/>
              <field name="usuario_id" string="Usuario" placeholder="Usuario multado"/>
              <field name="libro_id" string="Libro" placeholder="Libro asociado"/>
              <field name="fecha_prestamo" string="Fecha préstamo" placeholder="Fecha del préstamo"/>
              <field name="fecha_devolucion" string="Fecha devolución" placeholder="Fecha de devolución"/>
            </group>
          </sheet>
        </form>
      </field>
    </record>

    <record model="ir.actions.act_window" id="biblioteca_multa_action_window">
      <field name="name">Multas</field>
      <field name="res_model">biblioteca.multa</field>
      <field name="view_mode">list,form</field>
    </record>

    <!-- ===================== MENÚS ===================== -->
    <menuitem name="Biblioteca" id="biblioteca_menu"/>
    <menuitem name="Libros" id="biblioteca_menu_libros" parent="biblioteca_menu" action="biblioteca_libro_action_window"/>
    <menuitem name="Autores" id="biblioteca_menu_autores" parent="biblioteca_menu" action="biblioteca_autor_action_window"/>
    <menuitem name="Usuarios" id="biblioteca_menu_usuarios" parent="biblioteca_menu" action="biblioteca_usuario_action_window"/>
    <menuitem name="Personal" id="biblioteca_menu_personal" parent="biblioteca_menu" action="biblioteca_personal_action_window"/>
    <menuitem name="Préstamos" id="biblioteca_menu_prestamos" parent="biblioteca_menu" action="biblioteca_prestamo_action_window"/>
    <menuitem name="Multas" id="biblioteca_menu_multas" parent="biblioteca_menu" action="biblioteca_multa_action_window"/>

  </data>
</odoo>
